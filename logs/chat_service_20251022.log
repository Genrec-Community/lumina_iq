2025-10-22 23:47:11 | ERROR | chat_service | error:77 | {"message": "Failed to index document", "data": {"filename": "Learn Rust Programming - Official Documentation(3).pdf", "error": "Unexpected Response: 400 (Bad Request)\nRaw response content:\nb'{\"status\":{\"error\":\"Payload error: JSON payload (34390196 bytes) is larger than allowed (limit: 33554432 bytes).\"},\"time\":0.0}'"}, "timestamp": "2025-10-22T18:17:11.614788", "logger": "chat_service"}
Traceback (most recent call last):
  File "/home/lucifer/dev/projects/mixed_stacked/learning/backend/services/qdrant_service.py", line 133, in index_document
    self.client.upsert(collection_name=self.collection_name, points=points)
  File "/home/lucifer/dev/projects/mixed_stacked/learning/.venv/lib/python3.12/site-packages/qdrant_client/qdrant_client.py", line 987, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/home/lucifer/dev/projects/mixed_stacked/learning/.venv/lib/python3.12/site-packages/qdrant_client/qdrant_remote.py", line 1300, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/lucifer/dev/projects/mixed_stacked/learning/.venv/lib/python3.12/site-packages/qdrant_client/http/api/points_api.py", line 1439, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/lucifer/dev/projects/mixed_stacked/learning/.venv/lib/python3.12/site-packages/qdrant_client/http/api/points_api.py", line 738, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/lucifer/dev/projects/mixed_stacked/learning/.venv/lib/python3.12/site-packages/qdrant_client/http/api_client.py", line 74, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/lucifer/dev/projects/mixed_stacked/learning/.venv/lib/python3.12/site-packages/qdrant_client/http/api_client.py", line 97, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.UnexpectedResponse: Unexpected Response: 400 (Bad Request)
Raw response content:
b'{"status":{"error":"Payload error: JSON payload (34390196 bytes) is larger than allowed (limit: 33554432 bytes)."},"time":0.0}'
2025-10-22 23:47:11 | ERROR | chat_service | error:77 | {"message": "Failed to index document", "data": {"filename": "Learn Rust Programming - Official Documentation(3).pdf", "error": "Unexpected Response: 400 (Bad Request)\nRaw response content:\nb'{\"status\":{\"error\":\"Payload error: JSON payload (34390196 bytes) is larger than allowed (limit: 33554432 bytes).\"},\"time\":0.0}'"}, "timestamp": "2025-10-22T18:17:11.632733", "logger": "chat_service"}
Traceback (most recent call last):
  File "/home/lucifer/dev/projects/mixed_stacked/learning/backend/services/rag_service.py", line 124, in index_document
    num_indexed = await qdrant_service.index_document(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/lucifer/dev/projects/mixed_stacked/learning/backend/services/qdrant_service.py", line 133, in index_document
    self.client.upsert(collection_name=self.collection_name, points=points)
  File "/home/lucifer/dev/projects/mixed_stacked/learning/.venv/lib/python3.12/site-packages/qdrant_client/qdrant_client.py", line 987, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/home/lucifer/dev/projects/mixed_stacked/learning/.venv/lib/python3.12/site-packages/qdrant_client/qdrant_remote.py", line 1300, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/lucifer/dev/projects/mixed_stacked/learning/.venv/lib/python3.12/site-packages/qdrant_client/http/api/points_api.py", line 1439, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/lucifer/dev/projects/mixed_stacked/learning/.venv/lib/python3.12/site-packages/qdrant_client/http/api/points_api.py", line 738, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/lucifer/dev/projects/mixed_stacked/learning/.venv/lib/python3.12/site-packages/qdrant_client/http/api_client.py", line 74, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/lucifer/dev/projects/mixed_stacked/learning/.venv/lib/python3.12/site-packages/qdrant_client/http/api_client.py", line 97, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.UnexpectedResponse: Unexpected Response: 400 (Bad Request)
Raw response content:
b'{"status":{"error":"Payload error: JSON payload (34390196 bytes) is larger than allowed (limit: 33554432 bytes)."},"time":0.0}'
2025-10-22 23:47:32 | ERROR | chat_service | error:77 | {"message": "Failed to index document", "data": {"filename": "Learn Rust Programming - Official Documentation(3).pdf", "error": "Unexpected Response: 400 (Bad Request)\nRaw response content:\nb'{\"status\":{\"error\":\"Payload error: JSON payload (34389909 bytes) is larger than allowed (limit: 33554432 bytes).\"},\"time\":0.0}'"}, "timestamp": "2025-10-22T18:17:32.210935", "logger": "chat_service"}
Traceback (most recent call last):
  File "/home/lucifer/dev/projects/mixed_stacked/learning/backend/services/qdrant_service.py", line 133, in index_document
    self.client.upsert(collection_name=self.collection_name, points=points)
  File "/home/lucifer/dev/projects/mixed_stacked/learning/.venv/lib/python3.12/site-packages/qdrant_client/qdrant_client.py", line 987, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/home/lucifer/dev/projects/mixed_stacked/learning/.venv/lib/python3.12/site-packages/qdrant_client/qdrant_remote.py", line 1300, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/lucifer/dev/projects/mixed_stacked/learning/.venv/lib/python3.12/site-packages/qdrant_client/http/api/points_api.py", line 1439, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/lucifer/dev/projects/mixed_stacked/learning/.venv/lib/python3.12/site-packages/qdrant_client/http/api/points_api.py", line 738, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/lucifer/dev/projects/mixed_stacked/learning/.venv/lib/python3.12/site-packages/qdrant_client/http/api_client.py", line 74, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/lucifer/dev/projects/mixed_stacked/learning/.venv/lib/python3.12/site-packages/qdrant_client/http/api_client.py", line 97, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.UnexpectedResponse: Unexpected Response: 400 (Bad Request)
Raw response content:
b'{"status":{"error":"Payload error: JSON payload (34389909 bytes) is larger than allowed (limit: 33554432 bytes)."},"time":0.0}'
2025-10-22 23:47:32 | ERROR | chat_service | error:77 | {"message": "Failed to index document", "data": {"filename": "Learn Rust Programming - Official Documentation(3).pdf", "error": "Unexpected Response: 400 (Bad Request)\nRaw response content:\nb'{\"status\":{\"error\":\"Payload error: JSON payload (34389909 bytes) is larger than allowed (limit: 33554432 bytes).\"},\"time\":0.0}'"}, "timestamp": "2025-10-22T18:17:32.213186", "logger": "chat_service"}
Traceback (most recent call last):
  File "/home/lucifer/dev/projects/mixed_stacked/learning/backend/services/rag_service.py", line 124, in index_document
    num_indexed = await qdrant_service.index_document(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/lucifer/dev/projects/mixed_stacked/learning/backend/services/qdrant_service.py", line 133, in index_document
    self.client.upsert(collection_name=self.collection_name, points=points)
  File "/home/lucifer/dev/projects/mixed_stacked/learning/.venv/lib/python3.12/site-packages/qdrant_client/qdrant_client.py", line 987, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/home/lucifer/dev/projects/mixed_stacked/learning/.venv/lib/python3.12/site-packages/qdrant_client/qdrant_remote.py", line 1300, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/lucifer/dev/projects/mixed_stacked/learning/.venv/lib/python3.12/site-packages/qdrant_client/http/api/points_api.py", line 1439, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/lucifer/dev/projects/mixed_stacked/learning/.venv/lib/python3.12/site-packages/qdrant_client/http/api/points_api.py", line 738, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/lucifer/dev/projects/mixed_stacked/learning/.venv/lib/python3.12/site-packages/qdrant_client/http/api_client.py", line 74, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/lucifer/dev/projects/mixed_stacked/learning/.venv/lib/python3.12/site-packages/qdrant_client/http/api_client.py", line 97, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.UnexpectedResponse: Unexpected Response: 400 (Bad Request)
Raw response content:
b'{"status":{"error":"Payload error: JSON payload (34389909 bytes) is larger than allowed (limit: 33554432 bytes)."},"time":0.0}'
2025-10-23 00:02:01 | ERROR | chat_service | error:77 | {"message": "Failed to retrieve context", "data": {"query": "explain chapter 4", "error": "RetrievalStrategyManager._notes_strategy() got an unexpected keyword argument 'top_k'", "error_type": "TypeError", "traceback": "Traceback (most recent call last):\n  File \"/home/lucifer/dev/projects/mixed_stacked/learning/backend/services/rag_service.py\", line 211, in retrieve_context\n    result = await retrieval_strategy_manager.retrieve(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/lucifer/dev/projects/mixed_stacked/learning/backend/services/retrieval_strategy_manager.py\", line 70, in retrieve\n    result = await RetrievalStrategyManager._notes_strategy(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: RetrievalStrategyManager._notes_strategy() got an unexpected keyword argument 'top_k'\n"}, "timestamp": "2025-10-22T18:32:01.915050", "logger": "chat_service"}
Traceback (most recent call last):
  File "/home/lucifer/dev/projects/mixed_stacked/learning/backend/services/rag_service.py", line 211, in retrieve_context
    result = await retrieval_strategy_manager.retrieve(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/lucifer/dev/projects/mixed_stacked/learning/backend/services/retrieval_strategy_manager.py", line 70, in retrieve
    result = await RetrievalStrategyManager._notes_strategy(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: RetrievalStrategyManager._notes_strategy() got an unexpected keyword argument 'top_k'
2025-10-23 00:02:01 | WARNING | chat_service | warning:73 | No relevant context found, falling back to full content preview
